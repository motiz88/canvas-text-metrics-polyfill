/*! canvas-text-metrics-polyfill 07-01-2015 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return"string"==typeof a?a:"font: "+a.font+"; textBaseline: "+a.textBaseline}function d(a){var b=c(a);return g.hasOwnProperty(b)?g[b]:{}}function e(a,b){for(var e=c(a),f=["alphabeticBaseline","hangingBaseline","ideographicBaseline","emHeightAscent","emHeightDescent"],h=d(e),i=0;f>i;++i){var j=f[i];h.hasOwnProperty(j)||b.hasOwnProperty(j)&&void 0!==b[j]&&(h[j]=b[j]-h[j])}g[e]=h}function f(){g={}}var g={};b.exports={fetch:d,store:e,clear:f}},{}],2:[function(a,b){b.exports=function(){"use strict";var a,b=255,c=4294967295,d=null,e="",f=null,g=null,h="",i={top:0,bottom:0,left:0,right:0},j=null,k=null;this.document=function(a){return arguments.length>0?(d!=a&&(m(),d=a),this):d},this.text=function(a){return arguments.length>0?(e!=a&&(j=null,k=null,e=a,q()),this):e},this.font=function(a){return arguments.length>0?(h!=a&&(h=a,p()),this):h};var l=function(){d&&(f&&f.ownerDocument==d||(o(),f=d.createElement("canvas"),f.height=1,f.width=1,f.style.visibility="hidden",g=null),g||(g=f.getContext("2d",{alpha:!1})))},m=function(){o(),f=null,g=null},n=function(){d&&(l(),f.style.display="",d.body.appendChild(f))},o=function(){f&&(f.width=f.height=0,f.style.display="none",f.parentNode&&f.parentNode.removeChild(f))},p=function(){if(l(),f&&g&&g.font!=h){f.style.font=f.font=g.font=h,a=1*f.style.fontSize.replace("px","");var b=a/2;i.top=i.bottom=i.left=i.right=b,j=null}},q=function(){l(),g&&(p(),j||(j=g.measureTextWidth(e)),null===k&&(k=!/\S/.test(e)))},r=function(a,b){for(var c=0;++c<a.length&&a[c]===b;);return c},s=function(a,b){for(var c=a.length-1;--c>0&&a[c]===b;);return c},t=function(a,b,c,d){var e=c*d,f=0,g=0;for(f=0,g=0;f<a.length&&c>g&&a[f]===b;)f+=e,f>=a.length&&(f=f-a.length+d,++g);return{i:f,j:g}},u=function(a,b,c,d){var e,f,g=c*d,h=1;for(e=a.length-Math.max(d-1,1),f=c-1;e>=0&&f>=0&&a[e]===b;)e-=g,0>e&&(e=a.length-Math.max(d-1,1)-h++*d,--f);return{i:e,j:f}};this.measure=function(d,l){if(q(),k)return{width:j.width};var m=2;n();var o="rtl"==d.direction;void 0===l&&(l={top:!0,left:!0,right:!0,bottom:!0}),l.top=l.hasOwnProperty("top")&&l.top,l.left=l.hasOwnProperty("left")&&l.left,l.right=l.hasOwnProperty("right")&&l.right,l.bottom=l.hasOwnProperty("bottom")&&l.bottom;var p,v,w=l.top,x=l.left,y=l.right,z=l.bottom,A=0,B=0,C=f.width=j.width,D=f.height;if(0===C)throw new Error("cannot measure this string");p=4*C,v=C;for(var E,F,G,H;w||z||x||y;){var I=i.left+i.right,J=i.top+i.bottom;if(J>10*a)throw new Error("Could not find text on canvas");var K,L,M,N;if(C=f.width=j.width+I|0,p=4*C,v=C,x||y){switch(d.textAlign){case"end":A=o?i.left:C-i.right;break;case"left":A=i.left;break;case"center":A=(f.width-I)/2+i.left;break;case"right":A=C-i.right;break;case"start":default:A=o?C-i.right:i.left}A-=i.left}if(D=f.height=a+J|0,w||z){switch(d.textBaseline){case"hanging":case"top":B=i.top;break;case"middle":B=(f.height-J)/2+i.top;break;case"bottom":case"ideographic":case"alphabetic":default:B=f.height-i.bottom}B-=i.top}g.fillStyle="white",g.fillRect(-2,-2,C+2,D+2),g.fillStyle="black",g.font=h,g.textBaseline=d.textBaseline,g.textAlign=d.textAlign,g.fillText(e,A+i.left,B+i.top);var O,P,Q,R,S,T,U,V,W=g.getImageData(0,0,C,D).data,X="[object Uint8ClampedArray]"===Object.prototype.toString.call(W);if(X){var Y=new Uint32Array(W.buffer);S=Y,T=c,U=v,V=1}else S=W,T=b,U=w8,V=4;O=S.length;var Z=!1;w&&(P=r(S,T),P==O?Z=!0:(E=(P/U|0)-i.top,E<=1-i.top?M=i.top?i.top*m:basePadding:w=!1)),!Z&&z&&(P=s(S,T),0===P?Z=!0:(F=(P/U+1|0)-i.top,F>=D-1-i.top?N=i.bottom?i.bottom*m:basePadding:z=!1)),!Z&&x&&(R=t(S,T,C,V),P=R.i,Q=R.j,Q==C?Z=!0:(G=(P%U/V|0)-i.left|0,G<=1-i.left?K=i.left?i.left*m:basePadding:x=!1)),y&&(R=u(S,T,C,V),P=R.i,Q=R.j,0>Q?Z=!0:(H=(P%U/V|0)+1-i.left|0,H>=C-1-i.left?L=i.right?i.right*m:basePadding:y=!1)),Z?(w=l.top,x=l.left,y=l.right,z=l.bottom,i.left=K=i.left?i.left*m:basePadding,i.right=L=i.right?i.right*m:basePadding,i.top=M=i.top?i.top*m:basePadding,i.bottom=N=i.bottom?i.bottom*m:basePadding):(x&&(i.left=K),y&&(i.right=L),w&&(i.top=M),z&&(i.bottom=N),(x||y||w||z)&&(w=l.top,x=l.left,y=l.right,z=l.bottom))}var $={width:j.width,actualBoundingBoxLeft:l.left?A-G:void 0,actualBoundingBoxRight:l.right?H-A:void 0,actualBoundingBoxAscent:l.top?B-E:void 0,actualBoundingBoxDescent:l.bottom?F-B:void 0};return $},this.end=function(){o()}}},{}],3:[function(a,b){var c="http://www.w3.org/2000/svg";b.exports=function(){"use strict";var a=null,b="",d=null,e=null,f="";this.document=function(b){return arguments.length>0?(a!=b&&(i(),a=b),this):a},this.text=function(a){return arguments.length>0?(b!=a&&(b=a,h()),this):b},this.font=function(a){return arguments.length>0?(f!=a&&(f=a,h()),this):f};var g=function(){a&&(d&&d.ownerDocument==a||(k(),d=a.createElementNS(c,"svg"),d.setAttributeNS(c,"height",100),d.setAttributeNS(c,"width",100),d.style.visibility="hidden"))},h=function(){g(),a&&d&&(e||(e=a.createElementNS(c,"text"),e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("fill","black")),e.textContent!=b&&(e.textContent=b),f&&e.style.font!=f&&(e.style.font=f))},i=function(){b="",e="",f=""},j=function(){a&&(g(),d&&!d.parentNode&&a.body.appendChild(d))},k=function(){a&&d&&d.parentNode&&d.parentNode.removeChild(d)};return this.measure=function(a){if(h(),!e)return void 0;j(),e.style.direction=a.direction;var b="rtl"==a.direction;switch(a.textAlign){case"left":e.style.textAnchor=b?"end":"start";break;case"right":e.style.textAnchor=b?"start":"end";break;case"center":e.style.textAnchor="middle";break;case"start":case"end":default:e.style.textAnchor=a.textAlign}switch(a.textBaseline){case"top":e.style.alignmentBaseline="before-edge";break;case"hanging":e.style.alignmentBaseline="text-before-edge";break;case"alphabetic":e.style.alignmentBaseline="text-after-edge";break;case"bottom":e.style.alignmentBaseline="after-edge";break;case"middle":e.style.alignmentBaseline="central";break;case"ideographic":default:e.style.alignmentBaseline=a.textBaseline}d.appendChild(e);var c=e.getBBox();d.removeChild(e);var f={actualBoundingBoxLeft:c.x,actualBoundingBoxRight:c.width+c.x,fontBoundingBoxAscent:-c.y,fontBoundingBoxDescent:c.height+c.y};return f},this.end=function(){k()},this}},{}],4:[function(a){(function(b){!function(){"use strict";function c(){var a=document.createElement("canvas").getContext("2d").measureText("");return"undefined"==typeof a.actualBoundingBoxAscent?!1:a.alphabeticBaseline>a.hangingBaseline?!1:a.emHeightAscent||a.emHeightDescent?!0:!1}function d(a){this.width=this.actualBoundingBoxLeft=this.actualBoundingBoxRight=this.fontBoundingBoxAscent=this.fontBoundingBoxDescent=this.actualBoundingBoxAscent=this.actualBoundingBoxDescent=this.emHeightAscent=this.emHeightDescent=this.hangingBaseline=this.alphabeticBaseline=this.ideographicBaseline=void 0,this.raw=a;for(var b in a)this.hasOwnProperty(b)&&(this[b]=a[b])}function e(a){var c="ltr";return a.currentStyle?c=a.currentStyle.direction:b.getComputedStyle&&(c=a.ownerDocument.defaultView.getComputedStyle(a,null).getPropertyValue("direction")),c}var f=a("./CanvasMeasurementContext"),g=a("./SVGMeasurementContext"),h=a("./sniffsvg"),i=a("./BaselineCache");if(!c()){var j=h(document);b.CanvasRenderingContext2D.prototype.measureTextWidth=b.CanvasRenderingContext2D.prototype.measureText;var k=null,l=null;b.CanvasRenderingContext2D.prototype.measureText=function m(a,b){if("string"==typeof b)switch(b){case"native":return this.measureTextWidth.apply(this,arguments);case"clear-baselines":i.clear()}var c;if("object"==typeof b&&b){c={width:!0,alphabeticBaseline:!1,hangingBaseline:!1,ideographicBaseline:!1,emHeightAscent:!1,emHeightDescent:!1,actualBoundingBoxLeft:!1,actualBoundingBoxRight:!1,actualBoundingBoxAscent:!1,actualBoundingBoxDescent:!1,fontBoundingBoxAscent:!1,fontBoundingBoxDescent:!1};for(var n in b)c[n]=void 0!==b[n]}else c={width:!0,alphabeticBaseline:!0,hangingBaseline:!0,ideographicBaseline:!0,emHeightAscent:!0,emHeightDescent:!0,actualBoundingBoxLeft:!0,actualBoundingBoxRight:!0,actualBoundingBoxAscent:!0,actualBoundingBoxDescent:!0,fontBoundingBoxAscent:!0,fontBoundingBoxDescent:!0};var o=this.canvas&&this.canvas.ownerDocument?this.canvas.ownerDocument:document;j||(j=h(this.doc));var p=!/\S/.test(a),q="rtl"==this.direction||"inherit"==this.direction&&"rtl"==e(this.canvas),r={textBaseline:this.textBaseline,textAlign:this.textAlign,direction:q?"rtl":"ltr"},s={},t={alphabeticBaseline:"alphabetic",hangingBaseline:"hanging",ideographicBaseline:"ideographic",emHeightAscent:"top",emHeightDescent:"bottom"},u={alphabeticBaseline:!0,hangingBaseline:!0,ideographicBaseline:!0,emHeightAscent:!0,emHeightDescent:!0,fontBoundingBoxAscent:!0,fontBoundingBoxDescent:!0};if(p){s.width=this.measureTextWidth(a).width,s.actualBoundingBoxLeft=0,s.actualBoundingBoxRight=s.width;var v=0;switch(r.textAlign){case"end":v=q?0:s.width;break;case"left":v=0;break;case"center":v=s.width/2;break;case"right":v=s.width;break;case"start":default:v=q?s.width:0}s.actualBoundingBoxLeft-=v,s.actualBoundingBoxRight-=v;var w={},x=!1;for(var y in c)c[y]&&(u.hasOwnProperty(y)?x=w[y]=!0:("actualBoundingBoxAscent"==y||"actualBoundingBoxDescent"==y)&&(x=w.alphabeticBaseline=!0));if(x){var z="_",A=m.call(this,z,w);for(var B in A)c[B]&&u.hasOwnProperty(B)&&void 0!==A[B]&&(s[B]=A[B]);s.actualBoundingBoxAscent=-A.alphabeticBaseline,s.actualBoundingBoxDescent=A.alphabeticBaseline}return new d(s)}k||(k=new f),k.document(o).font(this.font).text(a);var C={top:!0,left:!0,right:!0,bottom:!0};C.left=c.actualBoundingBoxLeft,C.right=c.actualBoundingBoxRight,C.top=c.actualBoundingBoxAscent||c.alphabeticBaseline||c.hangingBaseline||c.ideographicBaseline||c.emHeightAscent||c.emHeightDescent,C.bottom=c.actualBoundingBoxDescent;var D=i.fetch(r),E=k.measure(r,C),F=E.actualBoundingBoxAscent;for(var G in E)c[G]&&void 0!==E[G]&&(s[G]=E[G]);var H=!0;for(var I in t)if(c[I])if(t[I]!=this.textBaseline){if(D.hasOwnProperty(I))s[I]=D[I];else if(!s.hasOwnProperty(I)){var J=t[I];H&&(a.length>1&&(F=k.text("_").measure(r,{top:!0}).actualBoundingBoxAscent),H=!1);var K=k.measure({textBaseline:J,textAlign:this.textAlign,direction:q?"rtl":"ltr"},{top:!0});s[I]=F-K.actualBoundingBoxAscent}}else s[I]=0;if(k.end(),c.width&&!s.hasOwnProperty("width")&&(s.width=this.measureTextWidth(a).width),(c.fontBoundingBoxAscent||c.fontBoundingBoxDescent)&&j.svg&&j.svgText11){l||(l=new g),l.document(o).font(this.font).text(a);var L=l.measure(r,{top:!0,bottom:!0});c.fontBoundingBoxAscent&&(s.fontBoundingBoxAscent=L.fontBoundingBoxAscent),c.fontBoundingBoxDescent&&(s.fontBoundingBoxDescent=L.fontBoundingBoxDescent),l.end()}return i.store(r,s),new d(s)}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BaselineCache":1,"./CanvasMeasurementContext":2,"./SVGMeasurementContext":3,"./sniffsvg":5}],5:[function(a,b){var c="http://www.w3.org/2000/svg";b.exports=function(a){return a?{svg:!!a.createElementNS&&!!a.createElementNS(c,"svg").createSVGRect,svgText11:a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Text","1.1")}:void 0}},{}]},{},[4]);